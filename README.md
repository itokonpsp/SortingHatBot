# SortingHatBot
Discordのチーム分けBot

## 目標
Discord一般ユーザーが効率的に公平なチーム分けを行えるような機能を提供する

## 機能
### 主要
##### 参加フォームの投稿
- ユーザーがチーム数を指定してスラッシュコマンドで呼び出すことで、システムは呼び出したテキストチャンネルに参加フォームを投稿する
- システムは参加フォームの投稿時に、同じテキストチャンネルに既に参加フォームがあることを検知すると、それを削除する
##### ユーザーの参加/キャンセル管理
- ユーザーが参加フォームの参加ボタンを押すことで、システムはユーザーをチーム分けに参加させる
- 同様にキャンセルボタンを押すことで、システムは参加をキャンセルさせる
- システムはユーザーを参加/キャンセルさせるとき、参加フォームのユーザー一覧を更新する
- ユーザーはチーム分けに参加中のユーザーを、参加フォームのユーザー一覧で確認できる
##### チーム分けの実施と結果の投稿
- ユーザーが参加フォームの実施ボタンを押すことで、システムは参加中のメンバーでチーム分けを実施する
- システムがチーム分けを実施するとき、参加フォームを削除する
- システムはチーム分けを処理し終わると、結果を投稿する
### サブ
##### 参加フォームの再投稿
- ユーザーがスラッシュコマンドで呼び出すことで、システムは同じテキストチャンネルに存在する参加フォームを再投稿する
- システムは同じテキストチャンネルに参加フォームが存在しないことを検知すると、代わりにコマンドを実行できなかったことを知らせるメッセージを投稿する
##### 前回と同じ内容でチーム分け
- ユーザーがスラッシュコマンドで呼び出すことで、システムは同じテキストチャンネルで前回実施したチーム分けのメンバーとチーム数を取得し、そのメンバーでチーム分けを実施する
- システムはテキストチャンネルでのチーム分けが初回であることを検知すると、代わりにコマンドを実行できなかったことを知らせるメッセージを投稿する
##### チーム分け結果の保持
- システムはチーム分けの結果を恒久的にデータベースに保持する
##### VCに参加中のユーザーを一括参加
- ユーザーがスラッシュコマンドで呼び出すことで、システムはユーザーが参加しているボイスチャンネルのユーザー一覧を取得し、そのメンバーを参加させた状態の参加フォームを投稿する
- システムはユーザーがボイスチャンネルに参加していないことを検知すると、代わりにコマンドを実行できなかったことを知らせるメッセージを投稿する
##### 自身以外のユーザーを参加/キャンセルさせる
- ユーザーが[ユーザーコマンド](https://discord.com/developers/docs/interactions/application-commands#user-commands)(ユーザーを右クリックすると呼び出せる)で呼び出すことで、システムは対象のユーザーを、同じテキストチャンネルに存在する参加フォームのチーム分けに参加させる
- システムは同じテキストチャンネルに参加フォームが存在しないことを検知すると、代わりにコマンドを実行できなかったことを知らせるメッセージを投稿する
## システム構想
- Bot用のサーバーを立ち上げて実行する
- 主要な言語はC#、プラットフォームは.Net 6.0を利用する
- 主要なライブラリとして[Discord.Net](https://github.com/discord-net/Discord.Net)を利用する
- Dockerコンテナとして実行する
- DBはMySQLのDockerコンテナを利用する
